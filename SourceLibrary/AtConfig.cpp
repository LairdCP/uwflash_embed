/******************************************************************************
**              Copyright (C) 2002 TDK Systems Europe Ltd
**
** Project:     TDK Intelligent Serial Dongle - Upgrade Class
**
** Module:      ATCONFIG.CPP
**
*******************************************************************************/

/******************************************************************************/
// CONDITIONAL COMPILE DEFINES
/******************************************************************************/

/******************************************************************************/
// Include Files
/******************************************************************************/
#include <string.h>
#include <stdlib.h>
#include <stdio.h>

#include "AtConfig.h"

/******************************************************************************/
// Local Defines
/******************************************************************************/

/******************************************************************************/
// Local Macros
/******************************************************************************/

/******************************************************************************/
// Local Forward Class,Struct & Union Declarations
/******************************************************************************/

/******************************************************************************/
// Local Class,Struct,Union Typedefs
/******************************************************************************/

/******************************************************************************/
// External Variable Declarations
/******************************************************************************/

/******************************************************************************/
// Global/Static Variable Declarations
/******************************************************************************/
AtConfig  gAtConfig;

/******************************************************************************/
// External Function Declarations
/******************************************************************************/

/******************************************************************************/
// Local Forward Function Declarations
/******************************************************************************/

/******************************************************************************/
/******************************************************************************/
// Local Functions or Private Members
/******************************************************************************/
/******************************************************************************/

/******************************************************************************/
/******************************************************************************/
// Global Functions or Public Members
/******************************************************************************/
/******************************************************************************/

//------------------------------------------------------------------------------
// Constructor
//------------------------------------------------------------------------------
AtConfig::AtConfig()
{

    mUserCommParms.mnBaudrate          = 115200;
    mUserCommParms.mnDataBits          = 8;
    mUserCommParms.mnStopBits          = 1;
    mUserCommParms.mnParity            = 0;

    mFirmwareFileChunkLen              =  UWF_FIRMWAREFILE_MAX_LINE_LEN;

    mfAutomaticMode = true;
    mToggleDTR      = true;

    mfVirtualPort   = true;
    mTargetType     = TARGET_PLATFORM;

}

//------------------------------------------------------------------------------
// Destructor
//------------------------------------------------------------------------------
AtConfig::~AtConfig()
{
}


//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
void AtConfig::SerialPortNameGet(int *pNum)
{
    int nNum = -1;
    if( strlen( mbaSerialPortName ) )
    {
        nNum = atoi(mbaSerialPortName);
    }
    *pNum = nNum;
}
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
void AtConfig::SerialPortNameGet(char **ppName)
{
    if( ppName )
    {
        *ppName = mbaSerialPortName;
    }
}

//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
void AtConfig::SerialPortNameSet(int nComNum)
{
    sprintf(mbaSerialPortName,"%d",nComNum);
}

//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
void AtConfig::SerialPortNameSet(char *pName)
{
    strncpy(mbaSerialPortName,pName,MAX_SERIAL_PORT_NAMELEN);
    mbaSerialPortName[MAX_SERIAL_PORT_NAMELEN]=0;
}


/******************************************************************************/
/******************************************************************************/
// Global Functions Non Class Members
/******************************************************************************/
/******************************************************************************/


/******************************************************************************/
// END OF FILE
/******************************************************************************/

